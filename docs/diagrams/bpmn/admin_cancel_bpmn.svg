<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1129px" preserveAspectRatio="none" style="width:734px;height:1129px;background:#FFFFFF;" version="1.1" viewBox="0 0 734 1129" width="734px" zoomAndPan="magnify"><title>Photannie &#8212; BPMN (Admin): Cancel booking</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="349.4053" x="190.9934" y="32.9951">Photannie &#8212; BPMN (Admin): Cancel booking</text></g><rect fill="none" height="20.9531" style="stroke:none;stroke-width:1;" width="701.3921" x="15" y="50.042"/><ellipse cx="220.6421" cy="85.9951" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="147.4648" x="146.9097" y="115.9951"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127.4648" x="156.9097" y="137.1338">Open booking details</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104.0996" x="168.5923" y="169.9639"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84.0996" x="178.5923" y="191.1025">Click "Cancel"</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161.6797" x="139.8022" y="223.9326"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.6797" x="149.8022" y="245.0713">Optionally enter reason</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171.6641" x="134.8101" y="394.2412"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151.6641" x="144.8101" y="415.3799">Show unauthorized (401)</text><ellipse cx="220.6421" cy="474.21" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="220.6421" cy="474.21" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="130.3789" x="155.4526" y="527.21"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110.3789" x="165.4526" y="548.3486">Find booking by id</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="150.1367" x="145.5737" y="629.5811"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130.1367" x="155.5737" y="650.7197">Show not found (404)</text><ellipse cx="220.6421" cy="703.0654" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="220.6421" cy="703.0654" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><polygon fill="#F1F1F1" points="200.7314,581.1787,240.5527,581.1787,252.5527,593.1787,240.5527,605.1787,200.7314,605.1787,188.7314,593.1787,200.7314,581.1787" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="224.6421" y="615.3892">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39.8213" x="200.7314" y="596.9868">Found?</text><polygon fill="#F1F1F1" points="168.7036,756.0654,272.5806,756.0654,284.5806,768.0654,272.5806,780.0654,168.7036,780.0654,156.7036,768.0654,168.7036,756.0654" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103.877" x="168.7036" y="771.8735">Already cancelled?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="137.6953" y="765.4712">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="284.5806" y="765.4712">no</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="174.875" x="21" y="790.0654"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.875" x="31" y="811.2041">Return 200 BookingDetail</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87.3398" x="31" y="825.1729">(current state)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="174.1836" x="21.3457" y="871.9717"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.1836" x="31.3457" y="893.1104">Show "Already cancelled"</text><ellipse cx="108.4375" cy="950.9092" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="108.4375" cy="950.9092" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171.4063" x="247.1436" y="790.0654"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151.4063" x="257.1436" y="811.2041">Update status=cancelled</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="118.7832" x="273.4551" y="858.0029"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98.7832" x="283.4551" y="879.1416">Set cancelled_at</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="211.4609" x="227.1162" y="925.9404"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="191.4609" x="237.1162" y="947.0791">Persist cancel_reason (optional)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="174.875" x="245.4092" y="981.9092"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.875" x="255.4092" y="1003.0479">Return 200 BookingDetail</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="233.9434" x="215.875" y="1035.8779"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="213.9434" x="225.875" y="1057.0166">Show "Cancelled" + refresh day list</text><ellipse cx="332.8467" cy="1100.8467" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="332.8467" cy="1100.8467" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1.5;" x1="15" x2="15" y1="50.042" y2="1117.8467"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="250.7129" x="459.8184" y="277.9014"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="230.7129" x="469.8184" y="299.04">POST /api/admin/bookings/{id}/cancel</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="469.8184" y="313.0088">&#160;</text><polygon fill="#F1F1F1" points="546.3499,345.8389,623.9998,345.8389,635.9998,357.8389,623.9998,369.8389,546.3499,369.8389,534.3499,357.8389,546.3499,345.8389" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="589.1748" y="380.0493">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77.6499" x="546.3499" y="361.647">Session valid?</text><line style="stroke:#000000;stroke-width:1.5;" x1="453.8184" x2="453.8184" y1="50.042" y2="1117.8467"/><line style="stroke:#000000;stroke-width:1.5;" x1="714.5313" x2="714.5313" y1="50.042" y2="1117.8467"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="95.9951" y2="115.9951"/><polygon fill="#181818" points="216.6421,105.9951,220.6421,115.9951,224.6421,105.9951,220.6421,109.9951" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="149.9639" y2="169.9639"/><polygon fill="#181818" points="216.6421,159.9639,220.6421,169.9639,224.6421,159.9639,220.6421,163.9639" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="203.9326" y2="223.9326"/><polygon fill="#181818" points="216.6421,213.9326,220.6421,223.9326,224.6421,213.9326,220.6421,217.9326" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="428.21" y2="463.21"/><polygon fill="#181818" points="216.6421,453.21,220.6421,463.21,224.6421,453.21,220.6421,457.21" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="663.5498" y2="692.0654"/><polygon fill="#181818" points="216.6421,682.0654,220.6421,692.0654,224.6421,682.0654,220.6421,686.0654" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="605.1787" y2="629.5811"/><polygon fill="#181818" points="216.6421,619.5811,220.6421,629.5811,224.6421,619.5811,220.6421,623.5811" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="252.5527" x2="305.7104" y1="593.1787" y2="593.1787"/><polygon fill="#181818" points="301.7104,662.0654,305.7104,672.0654,309.7104,662.0654,305.7104,666.0654" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.7104" x2="305.7104" y1="593.1787" y2="736.0654"/><line style="stroke:#181818;stroke-width:1;" x1="305.7104" x2="220.6421" y1="736.0654" y2="736.0654"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="736.0654" y2="756.0654"/><polygon fill="#181818" points="216.6421,746.0654,220.6421,756.0654,224.6421,746.0654,220.6421,750.0654" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="561.1787" y2="581.1787"/><polygon fill="#181818" points="216.6421,571.1787,220.6421,581.1787,224.6421,571.1787,220.6421,575.1787" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.4375" x2="108.4375" y1="838.0029" y2="871.9717"/><polygon fill="#181818" points="104.4375,861.9717,108.4375,871.9717,112.4375,861.9717,108.4375,865.9717" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.4375" x2="108.4375" y1="905.9404" y2="939.9092"/><polygon fill="#181818" points="104.4375,929.9092,108.4375,939.9092,112.4375,929.9092,108.4375,933.9092" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="332.8467" x2="332.8467" y1="824.0342" y2="858.0029"/><polygon fill="#181818" points="328.8467,848.0029,332.8467,858.0029,336.8467,848.0029,332.8467,852.0029" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="332.8467" x2="332.8467" y1="891.9717" y2="925.9404"/><polygon fill="#181818" points="328.8467,915.9404,332.8467,925.9404,336.8467,915.9404,332.8467,919.9404" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="332.8467" x2="332.8467" y1="959.9092" y2="981.9092"/><polygon fill="#181818" points="328.8467,971.9092,332.8467,981.9092,336.8467,971.9092,332.8467,975.9092" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="332.8467" x2="332.8467" y1="1015.8779" y2="1035.8779"/><polygon fill="#181818" points="328.8467,1025.8779,332.8467,1035.8779,336.8467,1025.8779,332.8467,1029.8779" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="332.8467" x2="332.8467" y1="1069.8467" y2="1089.8467"/><polygon fill="#181818" points="328.8467,1079.8467,332.8467,1089.8467,336.8467,1079.8467,332.8467,1083.8467" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="156.7036" x2="108.4375" y1="768.0654" y2="768.0654"/><line style="stroke:#181818;stroke-width:1;" x1="108.4375" x2="108.4375" y1="768.0654" y2="790.0654"/><polygon fill="#181818" points="104.4375,780.0654,108.4375,790.0654,112.4375,780.0654,108.4375,784.0654" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="284.5806" x2="332.8467" y1="768.0654" y2="768.0654"/><line style="stroke:#181818;stroke-width:1;" x1="332.8467" x2="332.8467" y1="768.0654" y2="790.0654"/><polygon fill="#181818" points="328.8467,780.0654,332.8467,790.0654,336.8467,780.0654,332.8467,784.0654" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="635.9998" x2="681.0068" y1="357.8389" y2="357.8389"/><polygon fill="#181818" points="677.0068,435.4756,681.0068,445.4756,685.0068,435.4756,681.0068,439.4756" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="681.0068" x2="681.0068" y1="357.8389" y2="512.21"/><line style="stroke:#181818;stroke-width:1;" x1="681.0068" x2="220.6421" y1="512.21" y2="512.21"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="512.21" y2="527.21"/><polygon fill="#181818" points="216.6421,517.21,220.6421,527.21,224.6421,517.21,220.6421,521.21" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="585.1748" x2="585.1748" y1="325.8389" y2="345.8389"/><polygon fill="#181818" points="581.1748,335.8389,585.1748,345.8389,589.1748,335.8389,585.1748,339.8389" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="257.9014" y2="262.9014"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="585.1748" y1="262.9014" y2="262.9014"/><line style="stroke:#181818;stroke-width:1;" x1="585.1748" x2="585.1748" y1="262.9014" y2="277.9014"/><polygon fill="#181818" points="581.1748,267.9014,585.1748,277.9014,589.1748,267.9014,585.1748,271.9014" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="585.1748" x2="585.1748" y1="369.8389" y2="382.04"/><line style="stroke:#181818;stroke-width:1;" x1="585.1748" x2="220.6421" y1="382.04" y2="382.04"/><line style="stroke:#181818;stroke-width:1;" x1="220.6421" x2="220.6421" y1="382.04" y2="394.2412"/><polygon fill="#181818" points="216.6421,384.2412,220.6421,394.2412,224.6421,384.2412,220.6421,388.2412" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="57.6826" x="205.5679" y="66.75">Admin</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="125.8506" x="521.2495" y="66.75">Backend (API)</text><?plantuml-src XPB1Qjmm48RlUefXJpOvU5joiWabkoNGGnlJJM-1C6kDus4LoKXo5oSRo4Fq2VCa7TjnjcrQUZ98e-__PiQHeo4e6nVHMYPuVle1g_Bp5qZEzHtRD8SrseeCR9tRiRrLAiYdHOzt41hKRY-7KAC9zClD5glThNUTrMjdd8Tzmv6KEepCWmeHVLJvPKjsveAcY6n2eVAruMe7YobtKGnraPr5OteW6yc39mpE5W9SIH1PBRRbf_IWyl9oSmKPjfpX49Mzq4FsmFengqRajRpa6f8DXI1S-8w6zOSKOYCwYNMf0fXD0V9Du_RGMUnYuppVauITBj-bXTo5w5ebyLmhbL-mUCpTR7jWFSLS36Fu3zww2FLGDx1Ftx07pBcHhdKFKm-6ZiYUmi3ClrBil8NtooMi9esFuqolRL9rtile18gHHloV1eit_CNHGfOxc-VVMYsCaTI5izVgOYHHFBw_mJWUbkG3X_dYPjeT9EvbgQFDFzt_ghf-LOGJ-HTgJw41ZJqOoVbzTZy1?></g></svg>