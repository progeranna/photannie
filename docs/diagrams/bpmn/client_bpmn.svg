<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1231px" preserveAspectRatio="none" style="width:999px;height:1231px;background:#FFFFFF;" version="1.1" viewBox="0 0 999 1231" width="999px" zoomAndPan="magnify"><title>Photannie &#8212; BPMN (Public): Create booking</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="347.3682" x="324.5906" y="32.9951">Photannie &#8212; BPMN (Public): Create booking</text></g><rect fill="none" height="20.9531" style="stroke:none;stroke-width:1;" width="966.5493" x="15" y="50.042"/><ellipse cx="222.5596" cy="85.9951" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="119.6328" x="162.7432" y="115.9951"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99.6328" x="172.7432" y="137.1338">Open main page</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="243.6875" x="100.7158" y="169.9639"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="223.6875" x="110.7158" y="191.1025">Select date (weekday, &lt;= +90 days)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="144.1367" x="150.4912" y="277.9014"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124.1367" x="160.4912" y="299.04">Render free slots list</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="212.5332" x="116.293" y="331.8701"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113.4785" x="126.293" y="353.0088">Pick slot + fill form</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="192.5332" x="126.293" y="366.9775">(name, phone +7..., comment?)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="93.3125" x="175.9033" y="399.8076"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="73.3125" x="185.9033" y="420.9463">Click "Book"</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="157.7598" x="143.6797" y="643.2412"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137.7598" x="153.6797" y="664.3799">Show field errors (422)</text><ellipse cx="222.5596" cy="723.21" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="222.5596" cy="723.21" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="247.8008" x="98.6592" y="776.21"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227.8008" x="108.6592" y="797.3486">Check time window within work hours</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104.1094" x="108.6592" y="811.3174">09:00..18:00 grid</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="196.9883" x="124.0654" y="844.1475"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139.4238" x="134.0654" y="865.2861">Check "not in the past"</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="176.9883" x="134.0654" y="879.2549">(for today, relative studio TZ)</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="207.7285" x="118.6953" y="912.085"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179.1152" x="128.6953" y="933.2236">Try create booking atomically</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="187.7285" x="128.6953" y="947.1924">(ensure no overlap with active)</text><polygon fill="#F1F1F1" points="184.2153,980.0225,260.9038,980.0225,272.9038,992.0225,260.9038,1004.0225,184.2153,1004.0225,172.2153,992.0225,184.2153,980.0225" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76.6885" x="184.2153" y="995.8306">Time conflict?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="153.207" y="989.4282">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="272.9038" y="989.4282">no</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171.5117" x="21" y="1014.0225"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151.5117" x="31" y="1035.1611">Show "Slot already busy"</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32.2676" x="31" y="1049.1299">(409)</text><ellipse cx="106.7559" cy="1106.9287" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="106.7559" cy="1106.9287" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="208.2969" x="234.2148" y="1014.0225"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="188.2969" x="244.2148" y="1035.1611">Persist booking (status=active)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="251.7031" x="212.5117" y="1081.96"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="231.7031" x="222.5117" y="1103.0986">Return 201 + BookingCreateResponse</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="165.4414" x="255.6426" y="1137.9287"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145.4414" x="265.6426" y="1159.0674">Show "Booking created"</text><ellipse cx="338.3633" cy="1202.8975" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="338.3633" cy="1202.8975" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1.5;" x1="15" x2="15" y1="50.042" y2="1219.8975"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="263.0996" x="474.2148" y="223.9326"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243.0996" x="484.2148" y="245.0713">GET /api/public/slots?date=YYYY-MM-DD</text><path d="M713.7852,443.7764 L713.7852,505.3076 L693.7852,509.3076 L713.7852,513.3076 L713.7852,574.8389 A0,0 0 0 0 713.7852,574.8389 L974.6885,574.8389 A0,0 0 0 0 974.6885,574.8389 L974.6885,453.7764 L964.6885,443.7764 L713.7852,443.7764 A0,0 0 0 0 713.7852,443.7764" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M964.6885,443.7764 L964.6885,453.7764 L974.6885,453.7764 L964.6885,443.7764" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.356" x="719.7852" y="460.8433">Validations:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.8711" x="719.7852" y="475.9761">- date format</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.9033" x="719.7852" y="491.1089">- start_time HH:MM aligned to 30min</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.2041" x="719.7852" y="506.2417">- duration_minutes multiple of 30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.2603" x="719.7852" y="521.3745">- name length</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.0605" x="719.7852" y="536.5073">- phone ^+7\\d{10}$</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.3521" x="719.7852" y="551.6401">- date within next 90 days</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.522" x="719.7852" y="566.7729">- weekday only</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="176.041" x="517.7441" y="485.3389"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156.041" x="527.7441" y="506.4775">POST /api/public/bookings</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="527.7441" y="520.4463">&#160;</text><polygon fill="#F1F1F1" points="559.9788,594.8389,651.5505,594.8389,663.5505,606.8389,651.5505,618.8389,559.9788,618.8389,547.9788,606.8389,559.9788,594.8389" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="609.7646" y="629.0493">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91.5718" x="559.9788" y="610.647">Validation error?</text><line style="stroke:#000000;stroke-width:1.5;" x1="468.2148" x2="468.2148" y1="50.042" y2="1219.8975"/><line style="stroke:#000000;stroke-width:1.5;" x1="979.6885" x2="979.6885" y1="50.042" y2="1219.8975"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="95.9951" y2="115.9951"/><polygon fill="#181818" points="218.5596,105.9951,222.5596,115.9951,226.5596,105.9951,222.5596,109.9951" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="149.9639" y2="169.9639"/><polygon fill="#181818" points="218.5596,159.9639,222.5596,169.9639,226.5596,159.9639,222.5596,163.9639" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="311.8701" y2="331.8701"/><polygon fill="#181818" points="218.5596,321.8701,222.5596,331.8701,226.5596,321.8701,222.5596,325.8701" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="379.8076" y2="399.8076"/><polygon fill="#181818" points="218.5596,389.8076,222.5596,399.8076,226.5596,389.8076,222.5596,393.8076" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="677.21" y2="712.21"/><polygon fill="#181818" points="218.5596,702.21,222.5596,712.21,226.5596,702.21,222.5596,706.21" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="824.1475" y2="844.1475"/><polygon fill="#181818" points="218.5596,834.1475,222.5596,844.1475,226.5596,834.1475,222.5596,838.1475" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="892.085" y2="912.085"/><polygon fill="#181818" points="218.5596,902.085,222.5596,912.085,226.5596,902.085,222.5596,906.085" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="106.7559" x2="106.7559" y1="1061.96" y2="1095.9287"/><polygon fill="#181818" points="102.7559,1085.9287,106.7559,1095.9287,110.7559,1085.9287,106.7559,1089.9287" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="338.3633" x2="338.3633" y1="1047.9912" y2="1081.96"/><polygon fill="#181818" points="334.3633,1071.96,338.3633,1081.96,342.3633,1071.96,338.3633,1075.96" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="338.3633" x2="338.3633" y1="1115.9287" y2="1137.9287"/><polygon fill="#181818" points="334.3633,1127.9287,338.3633,1137.9287,342.3633,1127.9287,338.3633,1131.9287" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="338.3633" x2="338.3633" y1="1171.8975" y2="1191.8975"/><polygon fill="#181818" points="334.3633,1181.8975,338.3633,1191.8975,342.3633,1181.8975,338.3633,1185.8975" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="172.2153" x2="106.7559" y1="992.0225" y2="992.0225"/><line style="stroke:#181818;stroke-width:1;" x1="106.7559" x2="106.7559" y1="992.0225" y2="1014.0225"/><polygon fill="#181818" points="102.7559,1004.0225,106.7559,1014.0225,110.7559,1004.0225,106.7559,1008.0225" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="272.9038" x2="338.3633" y1="992.0225" y2="992.0225"/><line style="stroke:#181818;stroke-width:1;" x1="338.3633" x2="338.3633" y1="992.0225" y2="1014.0225"/><polygon fill="#181818" points="334.3633,1004.0225,338.3633,1014.0225,342.3633,1004.0225,338.3633,1008.0225" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="960.0225" y2="980.0225"/><polygon fill="#181818" points="218.5596,970.0225,222.5596,980.0225,226.5596,970.0225,222.5596,974.0225" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="663.5505" x2="694.6445" y1="606.8389" y2="606.8389"/><polygon fill="#181818" points="690.6445,684.4756,694.6445,694.4756,698.6445,684.4756,694.6445,688.4756" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="694.6445" x2="694.6445" y1="606.8389" y2="761.21"/><line style="stroke:#181818;stroke-width:1;" x1="694.6445" x2="222.5596" y1="761.21" y2="761.21"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="761.21" y2="776.21"/><polygon fill="#181818" points="218.5596,766.21,222.5596,776.21,226.5596,766.21,222.5596,770.21" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="605.7646" y1="533.2764" y2="594.8389"/><polygon fill="#181818" points="601.7646,584.8389,605.7646,594.8389,609.7646,584.8389,605.7646,588.8389" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="203.9326" y2="208.9326"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="605.7646" y1="208.9326" y2="208.9326"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="605.7646" y1="208.9326" y2="223.9326"/><polygon fill="#181818" points="601.7646,213.9326,605.7646,223.9326,609.7646,213.9326,605.7646,217.9326" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="605.7646" y1="257.9014" y2="262.9014"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="222.5596" y1="262.9014" y2="262.9014"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="262.9014" y2="277.9014"/><polygon fill="#181818" points="218.5596,267.9014,222.5596,277.9014,226.5596,267.9014,222.5596,271.9014" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="433.7764" y2="447.0576"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="605.7646" y1="447.0576" y2="447.0576"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="605.7646" y1="447.0576" y2="485.3389"/><polygon fill="#181818" points="601.7646,475.3389,605.7646,485.3389,609.7646,475.3389,605.7646,479.3389" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="605.7646" y1="618.8389" y2="631.04"/><line style="stroke:#181818;stroke-width:1;" x1="605.7646" x2="222.5596" y1="631.04" y2="631.04"/><line style="stroke:#181818;stroke-width:1;" x1="222.5596" x2="222.5596" y1="631.04" y2="643.2412"/><polygon fill="#181818" points="218.5596,633.2412,222.5596,643.2412,226.5596,633.2412,222.5596,637.2412" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="52.1104" x="215.5522" y="66.75">Client</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="125.8506" x="661.0264" y="66.75">Backend (API)</text><?plantuml-src XPDHQzim4CVVzIcEi0U7jAdR5RewAsLfnxg7hAO9WusmejXdMqIMZ7HkPjR1FiG-uJx9JaxQjL2ONuIakzFl_lStAT88QML96gCG_lpw3TDqzWcYj5rfbGqJk70e2M5bxLgPKWZFIoEThC5NChSRFeH2QezFRbOoMvVEjYQ_iDews5IAK8Zx2wtGqBtm91s9vBf10xLK1XfPuaGaSzIO4UJXmMY3kCvbjmTlps1q6lDfvuSJhZBbwcXoYDwb7uVt8ldmVW47ib47JSzyuBKbVnwAd7tXRtyssx-yd3nvFhdXT7HGE4Jeeq4hJmoGgcpTdy082gKr5DRLInCPMUCUD9Kr2AEJyNYy1vcjQwvspaW95-QymPGr6hn4c5xFdoFkrFHBCn76ShTEbHM9pr8hvbRM-4JiRtK8199urujsIwf6kBfAPZFWuD9W3cJXTLmh4p9QrwVVyhObz52tcbJ3CxO51t54w0Gqcf8gtcqx-ZOwMIxp7uVnprSFhsuKLJmNWzy9TjhprMuaO8tkH6Wmi0kX2eZ-eGCwPztv4AZYyKOT-g40U1GV89bNTiFoeiwtiHwYuwCZ5XAuITk4ogeGB6k5B6lVCTkClVQ0jR5k3PLj7GiOdoPnF1uVlk45IgVooKFYWEc0evc33UPfm8DaDLcltbOEDVFUiGEepPM5nTVWhcJXEiYUUHuasLfbKkkEAw3nhKFk7EmTEYsR7Wfa5cfnXI368Y1drXGyQ_gl4eDvC9pK_6ZUmQhrNI0zZa-VACB_5qJ6XlmaHUVPhezu4Jk3Md_sYC0nDqYjCt0K7xAJfzl0xPzyWxvXV-7aHPHTw4w1VF1y9dy1?></g></svg>